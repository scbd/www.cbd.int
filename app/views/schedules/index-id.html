<div>
    <style>
        .announcement h1,
        .announcement h2,
        .announcement h3,
        .announcement h4,
        .announcement h5,
        .announcement h6 {
            color: inherit;
            font-size: 14px;
            font-weight: normal;
        }

        .announcement h1 { font-size:175% }
        .announcement h2 { font-size:150% }
        .announcement h3 { font-size:130% }
        .announcement h4 { font-size:120% }
        .announcement h5 { font-size:110% }
        .announcement h6 { font-size:105% }

        .schedule .schedule-item  > td > table {
            margin-bottom: 0px;
        }

        .schedule .schedule-item > td > table > tbody > tr > td {
            border: none !important;
        }

        .schedule .schedule-item:not(.warning):not(.alert)  > td > table {
            background-color: inherit;
        }

        .schedule .schedule-item  .schedule-item-message {
            text-align: center;
            font-weight: bold;
            margin-top: 7px;
            color:#555;
        }

        .schedule .schedule-item.warning > td { background-color:#F7ECB5; }
        .schedule .schedule-item.alert   > td { background-color:#F7B6B6; }


    </style>

    <div class="row">


        <div ng-if="(indexIdCtrl.frames | filter: { 'content' : { 'type':'schedule'}, reservations: { $ : search } }).length">

            <div class="col-xs-12 schedule" ng-repeat="frame in (indexIdCtrl.frames | filter: { 'content' : { 'type':'schedule'}, reservations: { $ : search } })">
                <!-- <div class="pull-right hidden-xs" style="margin:15px;margin-top:24px">
                    <input type="text" class="form-control" ng-model="search" placeholder="Search...">
                </div> -->
                <h2 class="pull-right"><small ng-if="indexIdCtrl.now"><em>Current venue time</em> <b>{{indexIdCtrl.now | moment:'tz':indexIdCtrl.event.timezone | moment:'format':'H:mm'}}</b></small></h2>
                <h2>{{frame.content.title}}</h2>
                <p class="alert alert-info" ng-if="(frame.reservations | filter:{ type : { _id: '570fd0a52e3fa5cfa61d90ee' } }).length">
                    <a href='/side-events'  style="color:inherit">For a detailed and complete list of side-events, please click here to visit the CBD Side-Events page</a>.
                </p>
                <table class="table table-striped">
                    <tr class="schedule-item {{r.message.level}}" ng-repeat="r in frame.reservations | filter:search">
                        <td>
                            <table class="table">
                                <tr>
                                    <td class="schedule-item-time text-right" class="text-nowrap" style="width:55px">
                                        <div class="text-primary"><b>{{r.start | moment:'tz':indexIdCtrl.event.timezone | moment:'format':'H:mm'}}</b></div>
                                        <div class="small text-muted">
                                            <span ng-hide="r.type.closed">Open</span>
                                            <span ng-show="r.type.closed">Closed</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="schedule-item-type pull-right">
                                            <span class="text-{{r.type.style}}">{{r.type.title}}</span>
                                            <div  ng-if="r.sideEvent" class="side-event-id hidden-xs text-muted text-right"><em>#{{r.sideEvent.id}}</em></div>
                                        </div>

                                        <div class="schedule-item-location">
                                            <b class="room">{{r.room.title}}</b>
                                            <em class="small text-muted">{{r.room.location}}</em>
                                        </div>

                                        <div class="schedule-item-title">
                                            {{r.sideEvent.title || r.title}}
                                            <div ng-if="r.agenda.visible && r.agenda.items.length">
                                                <div ng-repeat="item in r.agenda.items">
                                                    <span class="label agenda {{item.prefix}}" title="item.title">{{item.prefix}} {{item.item}}</span>
                                                    {{item.text || item.title}}
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </table>

                            <div ng-if="r.message.text" class="schedule-item-message">{{r.message.text}}</div>

                        </td>
                    </tr>
                    <tr><td></td></tr>
                </table>
            </div>
        </div>


        <div ng-if="(indexIdCtrl.frames | filter: { 'content' : { 'type':'announcement', html : search } }).length">

            <div class="col-sm-8 col-xs-12">
                <h1>Announcements</h1>
            </div>
        </div>

        <div>
            <div class="col-xs-12 announcement" ng-repeat="frame in (indexIdCtrl.frames | filter: { 'content' : { 'type':'announcement', html : search} })">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div ng-bind-html="frame.content.html | sanitizeHtml | safeHtml">
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
