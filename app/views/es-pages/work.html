<div class="container-fluid" style="padding-top:20px;padding-bottom:20px;">

    <!-- page header -->
    <header-nav></header-nav>
    <style>
        .vertical-align {
            display: flex;
            flex-direction: row;
        }

        .vertical-align>[class^="col-"],
        .vertical-align>[class*=" col-"] {
            display: flex;
            align-items: center;
            justify-content: center;
            /* Optional, to align inner items
                              horizontally inside the column */
        }

    </style>
    <!-- page content -->
    <div class="row">
        <div class="col-md-12">
            <div class="hero-cont-two" style="background-image: url(https://attachments.cbd.int/es8.jpg);">
                <div class="page-title">
                    <h4>At Work<h4>

                </div>
           </div>
        </div>
    </div>

    <div class="row-fluid">

        <div class="col-sm-12 hidden-md hidden-lg" style="margin-bottom:20px;">
            <div style="padding:10px;border-bottom:1px solid #efefef;">
                <strong>Filters:</strong>
                <div class="input-group">
            <input type="text" class="form-control" ng-model="esWorkCtrl.search" placeholder="key word">
            <span class="input-group-btn">
            <button class="btn btn-default" type="button">
            <i class="fa fa-close" ng-if="esWorkCtrl.search" ng-click="esWorkCtrl.search='';"></i>
            <i class="fa fa-search" ng-if="!esWorkCtrl.search"></i>
            </button>
            </span>
            </div>
                    <!-- <input type="checkbox"> news article<br> -->
            </div>
            <div>
                <h4  class="color-blue" style="border-bottom:1px solid #eee;">Filter by type</h4>
                    <input type="checkbox" ng-model="esWorkCtrl.type" ng-true-value="'event'" ng-false-value=""> event<br>
                    <input type="checkbox" ng-model="esWorkCtrl.type" ng-true-value="'statement'" ng-false-value=""> statement<br>
                    <input type="checkbox" ng-model="esWorkCtrl.type" ng-true-value="'report'" ng-false-value=""> report <br>
            </div>
            </div>
        </div>

        <div class="col-sm-12 col-md-9">
            <div ng-repeat-start="line in esWorkCtrl.work | filter:{ schema_s: esWorkCtrl.type} | filter:{ title_s: esWorkCtrl.search} | byDate:esWorkCtrl.date"  ng-if="$first || esWorkCtrl.hasMonthChange(line.startDate_dt,esWorkCtrl.work[$index-1].startDate_dt)">
              <h2 style="margin-bottom: 0px;" ng-if="$first">{{line.startDate_dt |moment:'format':'YYYY'}}</h2>
              <hr style="margin-top: 0px;"/>
              <h5  style="margin-bottom: 0px;">{{line.startDate_dt |moment:'format':'MMMM'}}</h5>
              <hr style="margin-top: 0px;"/>
            </div>
            <div class="col-sm-12 work-item" ng-repeat-end>

                <div class="row hidden-md hidden-lg hidden-xl">
                    <!-- <pre>{{line |JSON}}</pre> -->
                    <div class="col-sm-12 col-md-3 text-center">

                        <a class="work-title" ng-href="{{line.schema_s}}/{{line._id || line.identifier_s}}" ng-if="line.img"><img ng-src="{{line.img || line.logo_s}}" width="150px"/></a>
                        <a class="work-title" ng-href="{{line.schema_s}}/{{line._id || line.identifier_s}}" ng-if="line.logo_s"><img ng-src="https://www.cbd.int/{{line.logo_s}}" width="150px"/></a>
                    </div>
                    <div class="col-sm-12 col-md-9 ">
                        <div style="width:100%;">
                          <a ng-href="https://www.cbd.int/2011-2020/dashboard/submit/event/{{ine.identifier_s}}" ng-if="esWorkCtrl.isAdmin()"><i class="fa fa-edit pull-right"  ></i></a>
                          <a ng-if="!(line.schema_s==='statement' && line.url.indexOf('.pdf')==-1)" class="work-title" ng-href="{{line.schema_s}}/{{line._id || line.identifier_s}}">{{line.title_s}}</a><br>
                          <a ng-if="line.schema_s==='statement' && line.url.indexOf('.pdf')==-1" class="work-title" ng-href="{{line.url}}" rel="noopener noreferrer" target="_blank">{{line.title_s}}</a><br>
                            <span class="work-date">{{line.startDate_dt | momentUtc:'format':'DD MMM YYYY'}}</span>
                        </div>
                    </div>
                </div>
                <div class="row vertical-align hidden-xs hidden-sm">
                    <!-- <pre>{{line |JSON}}</pre> -->
                    <div class="col-sm-12 col-md-3 text-center">

                        <a class="work-title" ng-href="{{line.schema_s}}/{{line._id || line.identifier_s}}" ng-if="line.img"><img ng-src="{{line.img || line.logo_s}}" width="150px"/></a>
                        <a class="work-title" ng-href="{{line.schema_s}}/{{line._id || line.identifier_s}}" ng-if="line.logo_s"><img ng-src="https://www.cbd.int/{{line.logo_s}}" width="150px"/></a>
                    </div>
                    <div class="col-sm-12 col-md-9 ">
                        <div style="width:100%;">
                          <a ng-href="https://www.cbd.int/2011-2020/dashboard/submit/event/{{line.identifier_s}}" ng-if="esWorkCtrl.isAdmin()"><i class="fa fa-edit pull-right"  ></i></a>

                            <a ng-if="!(line.schema_s==='statement' && line.url.indexOf('.pdf')==-1)" class="work-title" ng-href="{{line.schema_s}}/{{line._id || line.identifier_s}}">{{line.title_s}}</a><br>
                            <a ng-if="line.schema_s==='statement' && line.url.indexOf('.pdf')==-1" class="work-title" ng-href="{{line.url}}" rel="noopener noreferrer" target="_blank">{{line.title_s}}</a><br>
                            <span class="work-date">{{line.startDate_dt | momentUtc:'format':'DD MMM YYYY'}}</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="col-sm-12 col-md-3 hidden-sm hidden-xs">
            <!-- <div>
                <h4 class="color-blue" style="border-bottom:1px solid #eee;">Filter by subject</h4>
                    <select>
                        <option value="xxx">xxx</option>
                        <option value="xxx">xxx</option>
                        <option value="xxx">xxx</option>
                        <option value="xxx">xxx</option>
                    </select>
            </div> -->
            <div>
                <h4  class="color-blue" style="border-bottom:1px solid #eee;">Filter by key word</h4>
                    <!-- <input type="text" ng-model="esWorkCtrl.search" > -->

                <div class="input-group">
     <input type="text" class="form-control" ng-model="esWorkCtrl.search" placeholder="key word">
     <span class="input-group-btn">
       <button class="btn btn-default" type="button">
           <i class="fa fa-close" ng-if="esWorkCtrl.search" ng-click="esWorkCtrl.search='';"></i>
           <i class="fa fa-search" ng-if="!esWorkCtrl.search"></i>
       </button>
     </span>
   </div>
                    <!-- <input type="checkbox"> news article<br> -->
            </div>
            <div>
                <h4  class="color-blue" style="border-bottom:1px solid #eee;">Filter by type</h4>
                    <input type="checkbox" ng-model="esWorkCtrl.type" ng-true-value="'event'" ng-false-value=""> event <span class="badge ">{{esWorkCtrl.getTypeCount('event')}}</span><br>
                    <input type="checkbox" ng-model="esWorkCtrl.type" ng-true-value="'statement'" ng-false-value=""> statement <span class="badge ">{{esWorkCtrl.getTypeCount('statement')}}</span><br>
                    <input type="checkbox" ng-model="esWorkCtrl.type" ng-true-value="'report'" ng-false-value=""> report <span class="badge ">{{esWorkCtrl.getTypeCount('report')}}</span><br>
                    <!-- <input type="checkbox"> news article<br> -->
            </div>
            <div>
                <h4 class="color-blue" style="border-bottom:1px solid #eee;">Filter by date</h4>

                   <span ng-repeat="year in esWorkCtrl.years"><input   type="checkbox" ng-model="esWorkCtrl.date" ng-true-value="'{{year}}-02-01T00:00:02.987Z'" ng-false-value=""> {{year}} <span class="badge ">{{esWorkCtrl.getYearCount(year+'-02-01T00:00:02.987Z')}}</span><br></span>

            </div>
        </div>
    </div>

</div>
